<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Oswald:wght@700&family=Rubik&display=swap"
      rel="stylesheet"
    />
    <title>DocStatus</title>
  </head>
  <body>
    <!--NAVBAR-->
    <header class="Navbar">
      <div class="logo">
        <h3>DocStatus</h3>
      </div>
      <nav>
        <ul id="navList" class="navList">
          <li>
            <a
              class="navLink"
              id="dashboard"
              href="#"
              onclick="showOnlySelectedClasses('home')"
              >Home</a
            >
          </li>
          <li>
            <a
              class="navLink"
              id="hospital"
              href="#"
              onclick="showOnlySelectedClasses('hospitalsBoard')"
              >Hospitals</a
            >
          </li>
          <li>
            <a
              class="navLink"
              id="doctors"
              href="#"
              onclick="showOnlySelectedClasses('allDoctors')"
              >Doctors</a
            >
          </li>
          <li>
            <a
              class="navLink"
              id="profile"
              href="#"
              onclick="showOnlySelectedClasses('userProfile')"
              >Profile</a
            >
          </li>
          <li>
            <a class="navLink" id="logIn" href="#" onclick="logOut()"
              >Log Out</a
            >
          </li>
        </ul>
      </nav>
      <button
        class="dropDownButton"
        id="dropDownButton"
        onclick="showMenu(this)"
      >
        <img src="./images/menu.png" alt="" />
      </button>
    </header>

    <ul id="navList1" class="navList1 navList">
      <li>
        <a
          class="navLink"
          id="dashboard"
          href="#"
          onclick="showOnlySelectedClasses('home')"
          >Home</a
        >
      </li>
      <li>
        <a
          class="navLink"
          id="hospital"
          href="#"
          onclick="showOnlySelectedClasses('hospitalsBoard')"
          >Hospitals</a
        >
      </li>
      <li>
        <a
          class="navLink"
          id="doctors"
          href="#"
          onclick="showOnlySelectedClasses('allDoctors')"
          >Doctors</a
        >
      </li>

      <li>
        <a
          class="navLink"
          id="profile"
          href="#"
          onclick="showOnlySelectedClasses('userProfile')"
          >Profile</a
        >
      </li>
      <li>
        <a class="navLink" id="logIn" href="#" onclick="logOut()">Log Out</a>
      </li>
    </ul>

    <!--HOME PAGE CONTENT-->
    <div class="homeContainer home" style="display: none">
      <div class="homeIntro">
        <h2>Welcome to <br /><span>DocStatus</span></h2>
        <hr style="width: 100%" />
        <p>
          Your Instant Connection to Sukkur's Health Pulse! Discover clinics,
          hospitals, and doctor availability in real-time. Because in health,
          timing is everything. Your well-being, our priority!
        </p>
      </div>
    </div>
    <div class="featuresContainer home" style="display: none">
      <h2>Our Features</h2>
      <div class="feature">
        <div class="featureHome">
          <img src="./images/filter.png" alt="" />
          <div class="featureInfo">
            <h3>Filtering</h3>
            <p>Helps to find the best doctor according to your requirement</p>
          </div>
        </div>
        <div class="featureHome">
          <img src="./images/time.png" alt="" />
          <div class="featureInfo">
            <h3>Real Time Info</h3>
            <p>We Provide Real-time Info of Doctors and Hospitals</p>
          </div>
        </div>
        <div class="featureHome">
          <img src="./images/doctor.png" alt="" />
          <div class="featureInfo">
            <h3>Doctors profile</h3>
            <p>Doctors profile to help you know about your doctor</p>
          </div>
        </div>
      </div>
    </div>

    <!--HOSPITAL BOARD-->
    <div class="hospitalsBoard" style="display: flex">
      <h2 class="cityHospitalHeading">Hospitals in Sukkur</h2>
      <hr style="width: 100%; margin-bottom: 30px" />
      <div class="searchHospital">
        <input type="text" placeholder="Search hospital" />
        <button><img src="./images/search.png" alt="" /></button>
      </div>
     
    </div>
    <div class="hospitalContact" style="display: none">
      <img src="./images/close.png" onclick="closeDialogue()" alt="close" />
      <p>Contact Info</p>
      <div class="contactInfo">
        <p class="contactNumber">
          <img src="./images/phone.png" alt="" /> 0313-3478691
        </p>
        <p class="email">
          <img src="./images/mail.png" alt="" />MuhammadHaseeb0070@gmail.com
        </p>
      </div>
    </div>
    <!--Doctor Status of HOSPITALS-->

    <div class="doctorStatusBoard" style="display: flex">
      <h3>Doctors in Hira Hospital</h3>
      <hr style="width: 100%" />
    </div>

    <div class="allDoctors" style="display: none;">
      <h3>All Doctors in City</h3>
      <div class="doctor">
        <img src="./images/DoctorPortrait.jpg" alt="" />
        <div class="doctorIntro" onclick="toggleElementDisplay('docStatus')">
          <h5>Dr. Ahmed Jamali</h5>
          <p>Field : <span>Orthopedician</span></p>
          <p>Timing : <span>09:00 am to 05:00 pm</span></p>
          <p>Current Hospital : <span>Hira Hospital</span></p>
          <div class="status">
            <div class="indicator"></div>
            <p>Available</p>
          </div>
          <p>Hospitals : <span>Hira hospital , Al-Khair hospital</span></p>
        </div>
      </div>
      <div class="doctor">
        <img src="./images/DoctorPortrait.jpg" alt="" />
        <div class="doctorIntro" onclick="toggleElementDisplay('docStatus')">
          <h5>Dr. Ahmed Jamali</h5>
          <p>Field : <span>Orthopedician</span></p>
          <p>Timing : <span>09:00 am to 05:00 pm</span></p>
          <p>Current Hospital : <span>Hira Hospital</span></p>
          <div class="status">
            <div class="indicator"></div>
            <p>Available</p>
          </div>
          <p>Hospitals : <span>Hira hospital , Al-Khair hospital</span></p>
        </div>
      </div>
    </div>

    <div class="userProfile" style="display: none">
      <img
        src="./images/edit.png"
        onclick="showOnlySelectedClasses('editProfile')"
        alt="edit Profile"
      />
      <div class="userProfileHeader">
        <img src="./images/DoctorPortrait.jpg" alt="" />
        <h3 class="userName">Afzal Chandio</h3>
      </div>
      <div class="userData">
        <p class="age">Age : <span>21</span></p>
        <p class="gender">Gender : <span>Male</span></p>
        <p class="contactNumber">Contact : <span>0313-3478691</span></p>
        <p class="email">Email : <span>MuhammadHaseeb0070@gmail.com</span></p>
      </div>
    </div>
    <div class="editProfile" style="display: none">
      <div class="headEditProfile">
        <h3>Edit Profile</h3>
        <div class="uploader">
          <div class="image-preview" id="imagePreview"></div>
          <label for="imageUpload" class="upload-button">Choose Image</label>
          <input
            type="file"
            id="imageUpload"
            class="image-upload"
            accept="image/*"
          />
        </div>
      </div>
      <hr style="width: 100%; margin: 20px 0px 10px 0px" />
      <form action="">
        <label for="firstName">First Name</label>
        <input type="text" id="firstName" name="firstname" />

        <label for="lastName">Last Name</label>
        <input type="text" id="lastName" name="lastname" />

        <label for="age">Age</label>
        <input type="text" id="age" name="age" />

        <label for="gender">Gender</label>
        <input type="text" id="gender" name="gender" />

        <label for="contactNumber">Contact Number</label>
        <input type="text" id="contactNumber" name="contactNumber" />

        <label for="mail">Email</label>
        <input type="text" id="mail" name="mail" />
      </form>

      <div class="editingButtons">
        <button
          class="resetButton profileEditingButton"
          onclick="showOnlySelectedClasses('userProfile')"
        >
          Cancel
        </button>
        <button
          class="saveButton profileEditingButton"
          onclick="showOnlySelectedClasses('userProfile')"
        >
          Save
        </button>
      </div>
    </div>
    <div class="docStatus" style="display: none">
      <img
        src="./images/close.png"
        onclick="revertChanges('docStatus')"
        alt=""
      />
      <div class="head">
        <img src="./images/DoctorPortrait.jpg" alt="" />
        <h3>Dr Sohail Jokhio</h3>
      </div>
      <div class="body">
        <p class="field">
          <img src="./images/award.png" alt="" />Field : Orthopedician
        </p>
        <p class="currentLocation">
          <img src="./images/placeholder.png" alt="" />Currently available in :
          Hira Hospital
        </p>
        <p class="contact">
          <img src="./images/phone.png" alt="" />Contact : 0313-3478691
        </p>
        <p class="availablity">
          <img src="./images/check.png" alt="" />Status : Available
        </p>

        <p><img src="./images/token.png" alt="" />Current token Number : 5</p>
        <p>
          <img src="./images/token.png" alt="" />Last token number sold : 23
        </p>
      </div>
    </div>
    <script>
      let flexElements = [];

      function toggleElementDisplay(className) {
        storeFlexElements();
        manipulateElements(className);
      }
      // Function to filter and store flex elements
      function storeFlexElements() {
        flexElements = Array.from(document.body.children).filter((element) => {
          const styles = getComputedStyle(element);
          return (
            styles.display === "flex" && !element.classList.contains("navList")
          );
        });
      }

      // Function to manipulate flex elements
      function manipulateElements(className) {
        flexElements.forEach((element) => {
          element.style.opacity = 0.5;
          element.style.filter = "blur(5px)";
          element.style.pointerEvents = "none";
        });

        const targetElement = document.querySelector(`.${className}`);
        if (targetElement) {
          targetElement.style.display = "flex";
        }
      }

      // Function to revert changes
      function revertChanges(className) {
        document.querySelector(`.${className}`).style.display = "none";
        flexElements.forEach((element) => {
          element.style.opacity = 1;
          element.style.filter = "blur(0px)";
          element.style.pointerEvents = "auto";
        });
      }

      var user = {
        profileImage: "./images/profilePic.png",
        firstName: "Afzal",
        lastName: "Chandio",
        gender: "Male",
        age: 21,
        contactNumber: "0313-3478691",
        email: "muhammadhaseeb0070@gmail.com",
      };
      // Sample object representing doctor data
      const doctorData = {
        name: "Doctor Sohail Jokhio",
        imageSrc: "./images/DoctorPortrait.jpg",
        field: "Orthopedic Surgeon",
        timing: "10:30 AM to 09:00 PM",
        availability: true, // true for available, false for unavailable
      };

      // Function to create and append a new doctor div

      createDoctorDivForStatusBoard(doctorData);
      createDoctorDivForStatusBoard(doctorData);
      createDoctorDivForStatusBoard(doctorData);
      createDoctorDivForStatusBoard(doctorData);
      createDoctorDivForStatusBoard(doctorData);
      function createDoctorDivForStatusBoard(data) {
        // Create doctor div
        const doctorDiv = document.createElement("div");
        doctorDiv.className = "doctor";

        // Create doctor profile image
        const doctorProfileImage = document.createElement("img");
        doctorProfileImage.src = data.imageSrc;
        doctorProfileImage.alt = "";
        doctorProfileImage.className = "doctorProfileImage";

        // Create doctor intro div
        const doctorIntroDiv = document.createElement("div");
        doctorIntroDiv.className = "doctorIntro";
        doctorIntroDiv.name=data.name;
        doctorIntroDiv.onclick = function () {
          toggleElementDisplay("docStatus");
        };

        // Create doctor name
        const doctorName = document.createElement("h4");
        doctorName.textContent = data.name;

        // Create hr element for doctor intro
        const hrDoctorIntro = document.createElement("hr");
        hrDoctorIntro.style = "width: 100%; margin-bottom: 1px";

        // Create paragraphs for field and timing
        const fieldParagraph = document.createElement("p");
        fieldParagraph.innerHTML = "Field : <span>" + data.field + "</span>";

        const timingParagraph = document.createElement("p");
        timingParagraph.innerHTML = "Timing : <span>" + data.timing + "</span>";

        // Create availability div
        const availabilityDiv = document.createElement("div");
        availabilityDiv.className = "availability";

        // Create availability indicator
        const availabilityIndicatorDiv = document.createElement("div");
        availabilityIndicatorDiv.className = "availabilityIndicator";

        // Create availability text
        const availabilityText = document.createElement("p");
        availabilityText.textContent = data.availability
          ? "Available"
          : "Unavailable";

        // Append elements to their respective parent elements
        availabilityDiv.appendChild(availabilityIndicatorDiv);
        availabilityDiv.appendChild(availabilityText);

        doctorIntroDiv.appendChild(doctorName);
        doctorIntroDiv.appendChild(hrDoctorIntro);
        doctorIntroDiv.appendChild(fieldParagraph);
        doctorIntroDiv.appendChild(timingParagraph);
        doctorIntroDiv.appendChild(availabilityDiv);

        doctorDiv.appendChild(doctorProfileImage);
        doctorDiv.appendChild(doctorIntroDiv);

        // Append the new doctor div after the hr element in doctorStatusBoard div
        const doctorStatusBoard = document.querySelector(".doctorStatusBoard");
        const hrElement = doctorStatusBoard.querySelector("hr");
        doctorStatusBoard.insertBefore(doctorDiv, hrElement.nextSibling);
      }

      // Sample object representing hospital data
      const hospitalData = {
        name: "New Hospital",
        logoSrc: "./images/DoctorPortrait.jpg",
        description: "This is a new hospital with state-of-the-art facilities.",
        // Add more attributes as needed
      };

      createHospitalDiv(hospitalData);
      createHospitalDiv(hospitalData);
      createHospitalDiv(hospitalData);
      // Function to create and append a new hospital div
      function createHospitalDiv(data) {
        const hospitalDiv = document.createElement("div");
        hospitalDiv.className = "hospital";

        const hospitalIntroDiv = document.createElement("div");
        hospitalIntroDiv.className = "hospitalintro";

        const hospitalLogo = document.createElement("img");
        hospitalLogo.className = "hospitalLogo";
        hospitalLogo.src = data.logoSrc;
        hospitalLogo.alt = "";

        const hospitalInfoDiv = document.createElement("div");
        hospitalInfoDiv.className = "hospitalInfo";

        const hospitalName = document.createElement("h3");
        hospitalName.className = "hospitalName";
        hospitalName.textContent = data.name;

        const hrElement = document.createElement("hr");
        hrElement.style = "width: 100%; border: 1px solid aquamarine";

        const hospitalDescription = document.createElement("p");
        hospitalDescription.className = "hospitalDescription";
        hospitalDescription.textContent = data.description;

        hospitalInfoDiv.appendChild(hospitalName);
        hospitalInfoDiv.appendChild(hrElement);
        hospitalInfoDiv.appendChild(hospitalDescription);

        hospitalIntroDiv.appendChild(hospitalLogo);
        hospitalIntroDiv.appendChild(hospitalInfoDiv);

        hospitalDiv.appendChild(hospitalIntroDiv);

        const hrOptions = document.createElement("hr");
        hrOptions.style = "border: 0.1px solid rgb(255, 255, 255); width: 100%";

        const hospitalOptionsDiv = document.createElement("div");
        hospitalOptionsDiv.className = "hospitalOptions";

        const doctorsButton = document.createElement("button");
        doctorsButton.className = "hospitalOptionButtons";
        doctorsButton.textContent = "Doctors";
        doctorsButton.name=data.name;
        doctorsButton.onclick = function () {
          showOnlySelectedClasses("doctorStatusBoard");
        };

        const contactsButton = document.createElement("button");
        contactsButton.className = "hospitalOptionButtons lastOption";
        contactsButton.textContent = "Contacts";
        contactsButton.name=data.name;
        contactsButton.onclick = function () {
          dialogueOpen(this);
        };

        hospitalOptionsDiv.appendChild(doctorsButton);
        hospitalOptionsDiv.appendChild(contactsButton);

        hospitalDiv.appendChild(hrOptions);
        hospitalDiv.appendChild(hospitalOptionsDiv);

        const searchHospitalDiv = document.querySelector(".searchHospital");
        searchHospitalDiv.parentNode.insertBefore(
          hospitalDiv,
          searchHospitalDiv.nextSibling
        );
      }

      // Call the function with the provided hospitalData object
      

      const checkbox = document.getElementById("statusButton");

      function logOut() {
        window.location.href = "login.html";
      }

      function updateNumber(change) {
        var numberElement = document.getElementById("numberDisplay");
        var currentNumber = parseInt(numberElement.innerText);
        if (currentNumber == 1 && change == -1) {
        } else {
          var newNumber = currentNumber + change;
          numberElement.innerText = newNumber;
        }
      }

      function deleteHospital(element) {
        let parent = element.parentNode;
        parent.remove();
      }
      function dialogueOpen(element) {
        console.log("dialogueopen entered");
        //    const hospitalName=element.parent.parentNode;
        document.querySelector(".hospitalContact").style.display = "flex";
        document.querySelector(".hospitalsBoard").style.opacity = 0.5;
        document.querySelector(".hospitalsBoard").style.filter = "blur(2px)";
        document.querySelector(".hospitalsBoard").style.pointerEvents = "none";
      }
      function closeDialogue() {
        document.querySelector(".hospitalContact").style.display = "none";
        document.querySelector(".hospitalsBoard").style.opacity = 1;
        document.querySelector(".hospitalsBoard").style.pointerEvents = "auto";
        document.querySelector(".hospitalsBoard").style.filter = "blur(0px)";
      }

      document
        .getElementById("imageUpload")
        .addEventListener("change", (event) => {
          const file = event.target.files[0];
          if (file) {
            if (isImage(file)) {
              if (file.size <= 2 * 1024 * 1024) {
                const reader = new FileReader();

                reader.onload = function (e) {
                  document.getElementById(
                    "imagePreview"
                  ).style.backgroundImage = `url(${e.target.result})`;
                };

                reader.readAsDataURL(file);
              } else {
                alert("Image size exceeds 2MB. Please choose a smaller image.");

                document.getElementById("imageUpload").value = "";
              }
            } else {
              alert(
                "Selected file is not an image. Please choose an image file."
              );

              document.getElementById("imageUpload").value = "";
            }
          }
        });

      function isImage(file) {
        return file.type.startsWith("image/");
      }

      var dropdownButton = document.getElementById("dropDownButton");
      var navListDropDown = document.getElementById("navList1");

      document.addEventListener("click", function (event) {
        // Check if the clicked element is outside the button and menu
        if (
          !dropdownButton.contains(event.target) &&
          !navListDropDown.contains(event.target)
        ) {
          hideMenu();
        }
      });
      function hideMenu() {
        dropdownButton.classList.remove("rotate"); // Use remove instead of toggle
        navListDropDown.style.display = "none";
      }
      function showMenu(element) {
        var navList = document.getElementById("navList1");
        var computedStyle = window.getComputedStyle(navList);

        element.classList.toggle("rotate");
        if (computedStyle.display === "none") {
          navList.style.display = "flex";
        } else {
          navList.style.display = "none";
        }
      }

      function changeNumber(direction) {
        if (direction == 1) {
          let curNumber = document.getElementById("currentNumber");
          let prevNumber = document.getElementById("previousNumber");
          let nextNumber = document.getElementById("nextNumber");
          let newDiv = document.createElement("div");
          let nextNumberValue = parseInt(nextNumber.innerHTML) + 1;

          prevNumber.remove();

          curNumber.className = "";
          curNumber.classList.add("tokenNumber");
          curNumber.classList.add("previousNumber");
          curNumber.id = "previousNumber";

          nextNumber.className = "";
          nextNumber.classList.add("currentNumber");
          nextNumber.classList.add("tokenNumber");
          nextNumber.id = "currentNumber";

          newDiv.offsetHeight;
          newDiv.className = "tokenNumber";
          newDiv.classList.add("nextNumber");
          newDiv.id = "nextNumber";
          newDiv.innerHTML = nextNumberValue;
          curNumber.parentElement.insertBefore(
            newDiv,
            curNumber.parentElement.children[3]
          );
        } else {
          if (
            parseInt(document.getElementById("previousNumber").innerHTML) != 0
          ) {
            let curNumber = document.getElementById("currentNumber");
            let prevNumber = document.getElementById("previousNumber");
            let nextNumber = document.getElementById("nextNumber");
            let newDiv = document.createElement("div");
            let nextNumberValue = parseInt(prevNumber.innerHTML) - 1;

            nextNumber.remove();

            curNumber.className = "";
            curNumber.classList.add("tokenNumber");
            curNumber.classList.add("nextNumber");
            curNumber.id = "nextNumber";

            prevNumber.className = "";
            prevNumber.classList.add("currentNumber");
            prevNumber.classList.add("tokenNumber");
            prevNumber.id = "currentNumber";

            newDiv.offsetHeight;
            newDiv.className = "tokenNumber";
            newDiv.classList.add("previousNumber");
            newDiv.id = "previousNumber";
            newDiv.innerHTML = nextNumberValue;
            curNumber.parentElement.insertBefore(
              newDiv,
              curNumber.parentElement.children[1]
            );
          }
        }
      }

      checkbox.addEventListener("change", function () {
        let statusText = document.getElementById("statusText");
        //  const statusLight = document.getElementById("statusLight");
        console.log("Entered checked");

        if (checkbox.checked) {
          statusText.textContent = "You are now Online";
          console.log("checked");
        } else {
          statusText.textContent = "You are now Offline";
          console.log("unchecked");
        }
      });

      function showOnlySelectedClasses(...classNames) {
        // Include the default class "Navbar" if not already present
        if (!classNames.includes("Navbar")) {
          classNames.push("Navbar");
        }

        // Get all direct children of the body
        var bodyChildren = document.body.children;

        // Loop through each child element of the body
        for (var i = 0; i < bodyChildren.length; i++) {
          var currentElement = bodyChildren[i];

          // Check if the current element has any of the specified classes
          if (
            classNames.some((className) =>
              currentElement.classList.contains(className)
            )
          ) {
            currentElement.style.display = "flex";
          } else {
            currentElement.style.display = "none";
          }
        }
      }
    </script>
  </body>
</html>
